import matplotlib.pyplot as plt
import numpy as np
from scipy.optimize import curve_fit
import math

# data = [2.11124578925265,1.21904581467045,0,
# 2.11124279672995,1.21903465299485,0,
# 2.11124179922322,1.21903093243889,0,
# 2.11124132376446,1.21902913525471,0,
# 2.11124101450482,1.21902798903321,0,
# 2.11124081724592,1.21902725394708,0,
# 2.11124068470572,1.21902675331481,0,
# 2.11124057563424,1.21902634483996,0,
# 2.1112404922519,1.21902602966939,0,
# 2.11124042531927,1.21902578193837,0,
# 2.11124037030523,1.21902557555101,0,
# 2.11124032625834,1.21902541470176,0,
# 2.11124028504761,1.21902526179619,0,
# 2.11124025242114,1.21902514094003,0,
# 2.11124022540788,1.21902503952196,0,
# 2.11124019738605,1.21902493401251,0,
# 2.11124017691822,1.21902485852382,0,
# 2.11124015457254,1.21902477546471,0,
# 2.11124014247777,1.21902472794092,0,
# 2.11124012606842,1.21902466577365,0,
# 2.11124011304499,1.21902461678921,0,
# 2.11124009825751,1.21902456085513,0,
# 2.11124008641383,1.21902451690231,0,
# 2.1112400740921,1.21902447415085,0,
# 2.11124006463426,1.2190244391973,0,
# 2.111240055863,1.2190244033011,0,
# 2.11124004908898,1.21902437811718,0,
# 2.11124003960722,1.21902434376532,0,
# 2.11124003165931,1.21902431315251,0,
# 2.11124002454784,1.219024287162,0,
# 2.11124001949436,1.2190242679281,0,
# 2.11124001326571,1.21902424429597,0,
# 2.11124000663014,1.21902422025981,0,
# 2.11124000165885,1.21902420202618,0,
# 2.11123999688085,1.2190241844179,0,
# 2.11123999090985,1.2190241623841,0,
# 2.1112399873021,1.21902414839726,0,
# 2.11123998321623,1.21902413390863,0,
# 2.11123997871029,1.21902411588174,0,
# 2.11123997476879,1.21902410144215,0,
# 2.11123997133599,1.21902408922652,0,
# 2.11123996894899,1.21902407933152,0,
# 2.11123996575473,1.21902406699202,0,
# 2.11123996011606,1.21902404777215,0,
# 2.11123995914805,1.21902404266784,0,
# 2.11123995427926,1.21902402612647,0,
# 2.11123995208275,1.21902401707507,0,
# 2.11123994995052,1.21902400913163,0,
# 2.11123994740399,1.21902399963882,0,
# 2.11123994411878,1.21902398778136,0]

data = [
    2.11124578925265,1.21904581467045,0,
    2.11124279672995,1.21903465299485,0,
    2.11124132376446,1.21902913525471,0,
    2.11124057563424,1.21902634483996,0,
    2.11124019738605,1.21902493401251,0,
    2.11124001326571,1.21902424429597,0,
    2.11123991974905,1.21902389549408,0,
    2.11123987174044,1.21902371716866,0,
    2.11123984872555,1.21902363095385,0,
    2.11123983708666,1.21902358735923,0,
    2.11123983115109,1.21902356531188,0,
    2.11123982827333,1.21902355453696,0
]

x = []
y = []
y1 = []
y2 = []

def sl(x, m, c):
    return m*x + c

# skip = 35
skip = 0
for i in range(3, len(data)-3*skip, 3):
    x.append(math.log(2e-6/(i/3)*2, 10))
    # y.append(math.log(((data[i]-data[0])**2 + (data[i+1]-data[1])**2)**(1/2), 10))
    y1.append((data[i]-2)/(data[i-3]-2))
    y2.append((data[i+1]-1)/(data[i-2]-1))
    # y.append(math.log(((data[i])**2 + (data[i+1])**2)**(1/2), 10))
    # y.append(((data[i])**2 + (data[i+1])**2)**(1/2))
    # x.append(2e-6/((i/3)*2))
    # x.append(i)
    # y.append(math.sqrt((data[i]-data[0])**2 + (data[i+1]-data[1])**2))
    # print(data[i], data[i+1])
    # print(data[0], data[1])

# fit, _ = curve_fit(sl, x, y)
fit1, _ = curve_fit(sl, x, y1)
fit2, _ = curve_fit(sl, x, y2)
print(y)
# print("2e-6", 2e-6+1)

# print(fit[0])
# plt.plot(x, y, 'o', color='C0')
plt.plot(x, y1, 'o', color='C0')
plt.plot(x, y2, 'o', color='C0')
# and the dotted
plt.plot(x, y1, linestyle='--', color='black')
plt.plot(x, y2, linestyle='--', color='black')
# plt.plot(x, sl(x, np.array(fit[0]), np.array(fit[1])), color='k', dashes=[10,5])
# plt.plot(x, sl(x, np.array(fit1[0]), np.array(fit1[1])), color='k', dashes=[10,5])
# plt.plot(x, sl(x, np.array(fit2[0]), np.array(fit2[1])), color='k', dashes=[10,5])
plt.gca().invert_xaxis()
plt.show()
print(len(x))
print(len(y))
